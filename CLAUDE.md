# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

- `pnpm dev` - Start development server with type generation (combines `wrangler types && wrangler dev`)
- `pnpm start` - Alternative development server command
- `pnpm deploy` - Deploy to Cloudflare Workers
- `pnpm run cf-typegen` - Generate TypeScript types from Wrangler configuration

## Architecture Overview

This is a Cloudflare Workers application built with Hono framework and TypeScript. The architecture consists of:

### Core Components
- **Main Worker** (`src/index.ts`) - Hono application serving as the entry point with basic routing
- **Echo Durable Object** (`src/echo/index.ts`) - Implements the core Echo functionality as a Durable Object with RPC methods

### Cloudflare Resources
- **Durable Object**: `Echo` class bound as `ECHO` - provides persistent state and RPC capabilities
- **KV Namespace**: `ECHO_KV` - key-value storage for the application
- **SQLite**: Configured for the Echo Durable Object via migrations

### Key Patterns
- The main worker routes requests to Durable Object instances using `c.env.ECHO.idFromName()`
- Durable Objects expose RPC methods (like `sayHello`) that can be called directly from the worker
- Type definitions are auto-generated by Wrangler and stored in `worker-configuration.d.ts`

### Entry Points
- Root path `/` returns a simple status message
- All paths under `/rin/*` are routed to an Echo Durable Object instance named "Rin"

Always run `wrangler types` when making changes to `wrangler.jsonc` to keep TypeScript definitions up to date.